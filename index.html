<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>I love the air</title>

</head>

<body>
<form method="post" action="/">
    <input type="text" name="id">
    <input type="text" name="temp">
    <input type="submit" value="Submit">
</form>
<div id="graph_container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
	<script src='/socket.io/socket.io.js'>
	</script>
	<script>
		var socket = io();
	</script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script>
$(function() {
  Highcharts.setOptions({
		global: {
			useUTC: false
		}
	});

	var graph = new Highcharts.Chart({
		title: { text: 'Realtime Air Temp' },
		xAxis: {
			type: 'datetime',
			tickPixelInterval: 10
		},
		yAxis: {
			title: { text: 'temp' },
			tickInterval: 10,
			min: 0,
			max: 100
		},
		tooltip: {
            formatter: function() {
                return '<b>'+ this.series.name + '</b><br/>'
                    + '[ ' + Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x)
                    + ' , '
                    + this.y + ' ]';
            }
		},
		chart: {
			type: 'spline',
			renderTo: 'graph_container',
			events: {
			}
		}
	});

socket.on('chartinit', function (sample) { // initalize with historical data
	graph.addSeries({data:sample.data, name:sample.id});
});
});
</script>
</body>
</html>
